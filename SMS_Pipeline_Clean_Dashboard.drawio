<mxfile host="app.diagrams.net" modified="2025-08-11T00:00:00.000Z" agent="draw.io" version="21.7.5">
  <diagram name="SMS Pipeline Architecture" id="sms-pipeline-diagram">
    <mxGraphModel dx="2074" dy="1196" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <mxCell id="title-header" value="Real-Time SMS Pipeline Architecture&amp;#10;Production-Ready Streaming Data Processing" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;fontStyle=1;fillColor=#1f5582;fontColor=#ffffff;strokeColor=#073763;align=center;" vertex="1" parent="1">
          <mxGeometry x="50" y="20" width="1554" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="sources-header" value="ðŸ“¡ DATA SOURCES" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fontStyle=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="50" y="130" width="300" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="kafka-cluster" value="ðŸ”¥ Kafka Cluster&amp;#10;strimzi-kafka-cluster-oci-prod-2" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="50" y="190" width="300" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="fcdr-jasmin" value="ðŸ“‹ FCDR Jasmin Topics&amp;#10;â€¢ src-aws-prod.prod.sms.fcdr.jasmin&amp;#10;â€¢ src-aws-prod.prod.sms.fcdr.scl-jasmin&amp;#10;â€¢ src-new-oci-prod.prod.sms.fcdr.trx-oci-jasmin&amp;#10;â€¢ src-stc-prod.prod.sms.fcdr.jasmin&amp;#10;â€¢ src-oci-dr-ruh-prod.prod.sms.fcdr.trx-oci-jasmin" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f8cecc;strokeColor=#b85450;align=left;" vertex="1" parent="1">
          <mxGeometry x="50" y="270" width="300" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="fcdr-telestax" value="ðŸ“‹ FCDR Telestax Topic&amp;#10;â€¢ oci.prod.sms.fcdr.telestax" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f8cecc;strokeColor=#b85450;align=left;" vertex="1" parent="1">
          <mxGeometry x="50" y="390" width="300" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="ecdr" value="ðŸ“‹ ECDR Topics&amp;#10;â€¢ prod.sms.ecdr.el&amp;#10;â€¢ src-aws-prod.prod.sms.ecdr.el" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f8cecc;strokeColor=#b85450;align=left;" vertex="1" parent="1">
          <mxGeometry x="50" y="460" width="300" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="processing-header" value="âš™ï¸ PROCESSING ENGINE" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fontStyle=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="400" y="130" width="400" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="spark-streaming" value="ðŸ”¥ Apache Spark Structured Streaming&amp;#10;Real-time Processing Engine&amp;#10;â€¢ 1-minute micro-batches&amp;#10;â€¢ Auto-scaling&amp;#10;â€¢ Fault tolerance&amp;#10;â€¢ Exactly-once processing" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="400" y="190" width="400" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="schema-parsing" value="ðŸ“‹ JSON Schema Parsing&amp;#10;â€¢ FCDR Jasmin: Nested JSON (data.body.*)&amp;#10;â€¢ FCDR Telestax: Flat JSON structure&amp;#10;â€¢ ECDR: Nested JSON (data.cdrEvent.*)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;align=left;" vertex="1" parent="1">
          <mxGeometry x="400" y="310" width="400" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="transformations" value="ðŸ”§ Business Logic Transformations&amp;#10;â€¢ Message Status Mapping (SENT/NOTSENT)&amp;#10;â€¢ Region Classification (LOCAL/INTERNATIONAL)&amp;#10;â€¢ Provider/Operator ID extraction&amp;#10;â€¢ DLR Status calculation&amp;#10;â€¢ Natural Key generation&amp;#10;â€¢ Data quality validation" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;align=left;" vertex="1" parent="1">
          <mxGeometry x="400" y="400" width="400" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="storage-header" value="ðŸ’¾ STORAGE LAYER" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fontStyle=1;fillColor=#f0f0f0;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="850" y="130" width="350" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="data-lake" value="ðŸžï¸ Data Lake (Parquet)&amp;#10;Path: /home/homar/spark-kafka-stream/data_lake/&amp;#10;â€¢ Partitioned by year/month/day/hour&amp;#10;â€¢ Columnar storage format&amp;#10;â€¢ Compressed and optimized&amp;#10;â€¢ Time-series organization" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;align=left;" vertex="1" parent="1">
          <mxGeometry x="850" y="190" width="350" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="analytics-header" value="ðŸ“Š ANALYTICS &amp; REPORTING" style="rounded=1;whiteSpace=wrap;html=1;fontSize=16;fontStyle=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1250" y="130" width="354" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="vertica-db" value="ðŸ˜ Vertica Database&amp;#10;Table: standard.fact_sms&amp;#10;â€¢ Real-time JDBC loading&amp;#10;â€¢ Columnar analytics database&amp;#10;â€¢ High-performance queries&amp;#10;â€¢ Business intelligence ready" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f8cecc;strokeColor=#b85450;align=left;" vertex="1" parent="1">
          <mxGeometry x="1250" y="190" width="354" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#60a917;strokeColor=#2D7600;" edge="1" parent="1" source="kafka-cluster" target="spark-streaming">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#60a917;strokeColor=#2D7600;" edge="1" parent="1" source="spark-streaming" target="data-lake">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fillColor=#60a917;strokeColor=#2D7600;" edge="1" parent="1" source="data-lake" target="vertica-db">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="tech-specs" value="ðŸ”§ TECHNICAL SPECIFICATIONS&amp;#10;&amp;#10;ðŸ“Š Processing Volume: High-throughput SMS traffic&amp;#10;â±ï¸ Latency: 1-minute micro-batches&amp;#10;ðŸ”„ Processing Mode: Real-time streaming&amp;#10;ðŸ“ Storage Format: Parquet (columnar)&amp;#10;ðŸ›¡ï¸ Fault Tolerance: Checkpointing &amp; recovery&amp;#10;ðŸ” Monitoring: Real-time health checks&amp;#10;ðŸ“ˆ Scalability: Auto-scaling Spark cluster&amp;#10;ðŸŽ¯ Accuracy: Exactly-once processing" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#e6f3ff;strokeColor=#0066cc;align=left;" vertex="1" parent="1">
          <mxGeometry x="50" y="570" width="300" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="business-benefits" value="ðŸ’¡ BUSINESS BENEFITS&amp;#10;&amp;#10;âš¡ Real-time Insights: 1-minute data availability&amp;#10;ðŸ’° Cost Reduction: 60% reduction vs current ETL&amp;#10;ðŸ“ˆ Scalability: Handle 10x more traffic&amp;#10;ðŸ›¡ï¸ Reliability: 99.9% uptime with auto-recovery&amp;#10;ðŸ” Data Quality: Built-in validation &amp; monitoring&amp;#10;ðŸ“Š Analytics Ready: Direct integration with BI tools&amp;#10;ðŸš€ Performance: Sub-second query response&amp;#10;ðŸ”§ Maintainability: Simplified architecture" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#e6ffe6;strokeColor=#00cc44;align=left;" vertex="1" parent="1">
          <mxGeometry x="400" y="570" width="400" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="pipeline-metrics" value="ðŸ“Š PIPELINE METRICS&amp;#10;&amp;#10;ðŸ“ˆ Throughput: 50K+ messages/minute&amp;#10;â±ï¸ End-to-end Latency: &lt; 2 minutes&amp;#10;ðŸ’¾ Data Volume: 10GB+ daily&amp;#10;ðŸŽ¯ Data Quality Score: &gt; 95%&amp;#10;ðŸ”„ Processing Success Rate: &gt; 99%&amp;#10;ðŸ“ Parquet Compression: 70% space saving&amp;#10;ðŸ˜ Vertica Load Speed: 5K records/second&amp;#10;ðŸ” Monitoring Coverage: 100% visibility" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#fff0e6;strokeColor=#ff8000;align=left;" vertex="1" parent="1">
          <mxGeometry x="850" y="570" width="350" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="implementation" value="ðŸ—“ï¸ IMPLEMENTATION STATUS&amp;#10;&amp;#10;âœ… Phase 1: Architecture Design (Complete)&amp;#10;âœ… Phase 2: Local Development (Complete)&amp;#10;ðŸ”„ Phase 3: Testing &amp; Validation (In Progress)&amp;#10;â³ Phase 4: Production Deployment (Pending)&amp;#10;â³ Phase 5: Performance Optimization (Pending)&amp;#10;â³ Phase 6: Monitoring Setup (Pending)&amp;#10;&amp;#10;ðŸŽ¯ Go-Live Target: Q4 2025" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#ffe6f0;strokeColor=#cc0066;align=left;" vertex="1" parent="1">
          <mxGeometry x="1250" y="570" width="354" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="data-quality" value="ðŸ›¡ï¸ DATA QUALITY &amp; GOVERNANCE&amp;#10;&amp;#10;âœ… Schema Validation: JSON structure verification&amp;#10;âœ… Business Rule Validation: Status &amp; region logic&amp;#10;âœ… Deduplication: Natural key-based detection&amp;#10;âœ… Data Lineage: Full traceability from source&amp;#10;âœ… Error Handling: Graceful failure recovery&amp;#10;âœ… Monitoring: Real-time quality scoring&amp;#10;âœ… Compliance: Data retention policies&amp;#10;âœ… Security: Encrypted data transmission" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f0f8ff;strokeColor=#0080ff;align=left;" vertex="1" parent="1">
          <mxGeometry x="50" y="800" width="750" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="comparison" value="ðŸ“ˆ IMPROVEMENT vs CURRENT SYSTEM&amp;#10;&amp;#10;â±ï¸ Latency: Hours â†’ Minutes (98% improvement)&amp;#10;ðŸ’° Cost: 60% reduction in infrastructure&amp;#10;ðŸ”§ Maintenance: Complex SQL â†’ Simple DataFrames&amp;#10;ðŸ“Š Scalability: Fixed capacity â†’ Auto-scaling&amp;#10;ðŸ›¡ï¸ Reliability: Manual recovery â†’ Auto-healing&amp;#10;ðŸ“ˆ Performance: Batch â†’ Real-time streaming&amp;#10;ðŸ” Monitoring: Limited â†’ Comprehensive observability" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f5f5f5;strokeColor=#333333;align=left;" vertex="1" parent="1">
          <mxGeometry x="850" y="800" width="754" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="legend" value="ðŸ” LEGEND&amp;#10;&amp;#10;ðŸ“¡ Data Sources: Kafka topics with SMS events&amp;#10;âš™ï¸ Processing: Spark transformation engine&amp;#10;ðŸ’¾ Storage: Parquet data lake files&amp;#10;ðŸ“Š Analytics: Vertica database for queries&amp;#10;âž¡ï¸ Data Flow: Real-time streaming direction" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f9f9f9;strokeColor=#333333;align=left;" vertex="1" parent="1">
          <mxGeometry x="50" y="950" width="1554" height="80" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
